@model eform.Models.vwReqOverTime

@{
    ViewBag.Title = "申請加班單";
}

<div class="row">
    <div class="col-md-10">
        <div class="box">
            <div class="box-header">
                <div class="box-title">
                    <h3><span class="label label-success">加班單申請</span></h3>
                </div>
            </div>
            <div class="box-body>">
                @using (Html.BeginForm("CreateOverTimeForm", "Form", FormMethod.Post, new { id = "fmMain" }))
                {
                    @Html.AntiForgeryToken()

                    <div class="form-horizontal">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                        <div class="form-group">
                            @Html.LabelFor(model =>model.billDate , htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.billDate, new { htmlAttributes = new { @class = "form-control", type = "date" } })
                                @Html.ValidationMessageFor(model => model.billDate, "", new { @class = "text-danger," })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.dtBegin, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.dtBegin, new { htmlAttributes = new { @class = "form-control", type = "datetime-local" } })
                                @Html.ValidationMessageFor(model => model.dtBegin, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.dtEnd, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.dtEnd, new { htmlAttributes = new { @class = "form-control", type = "datetime-local" } })
                                @Html.ValidationMessageFor(model => model.dtEnd, "", new { @class = "text-danger" })
                            </div>
                        </div>
                        <div class="form-group">

                            @Html.LabelFor(model => model.hours, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => model.hours, new { htmlAttributes = new { @class = "form-control",type="number" } })
                                @Html.ValidationMessageFor(model => model.hours, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.sMemo, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.TextAreaFor(model => model.sMemo, htmlAttributes : new { @class = "form-control", rows = "3" })
                                @Html.ValidationMessageFor(model => model.sMemo, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-offset-2 col-md-10">
                                <input type="submit" value="送出" class="btn btn-primary" onclick="return doSubmit();" />
                            </div>
                        </div>
                    </div>
                }

            </div>
            <div class="box-footer">

            </div>
        </div>
    </div>
</div>
                @section Scripts {
                    <script type="text/javascript">
                        function doSubmit() {
                            debugger;
                            var dtend = new Date($('#dtEnd').val()).getTime();
                            var dtbegin = new Date($('#dtBegin').val()).getTime();
                            if ((dtend - dtbegin) < 0) {
                                toastr["error"]("結束時間不得小於開始時間", "Error");
                                return false;
                            }
                            return true;
                        }
                        $(function () {
                            $('#sMemo').css('width', '500px');
                            $('#billDate').val(getLocalDateStr());
                            $('#dtBegin').val(getLocalDateTimeStr());
                            $('#dtEnd').val(getLocalDateTimeStr());
                        });
                    </script>
                }
